<div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <!-- Breadcrumb -->
  <div class="flex items-center gap-2 text-sm text-muted-foreground mb-8">
    <a routerLink="/" class="hover:text-rose-gold transition-colors">Home</a>
    <span>/</span>
            <a routerLink="/" class="hover:text-rose-gold transition-colors">Shop</a>
    <span>/</span>
    <span class="text-foreground">{{ product?.name }}</span>
  </div>

  <div *ngIf="product; else loading" class="grid lg:grid-cols-2 gap-12">
    <!-- Product Images -->
    <div class="space-y-4">
      <div class="aspect-square rounded-2xl overflow-hidden bg-gradient-subtle">
        <img
          [src]="product.images[selectedImage]"
          [alt]="product.name"
          class="w-full h-full object-cover"
        />
      </div>
      <div class="flex gap-4">
        <button
          *ngFor="let image of product.images; let index = index"
          (click)="selectedImage = index"
          [class]="'w-20 h-20 rounded-lg overflow-hidden border-2 transition-all ' +
                   (selectedImage === index ? 'border-rose-gold' : 'border-transparent')"
        >
          <img [src]="image" [alt]="'View ' + (index + 1)" class="w-full h-full object-cover" />
        </button>
      </div>
    </div>

    <!-- Product Info -->
    <div class="space-y-6">
      <div>
        <h1 class="text-3xl font-playfair font-bold text-deep-rose mb-2">{{ product.name }}</h1>
        <div class="flex items-center gap-4 mb-4">
          <div class="flex items-center gap-2">
            <span class="text-3xl font-bold text-foreground">${{ product.price }}</span>
            <span *ngIf="product.originalPrice" class="text-xl text-muted-foreground line-through">${{ product.originalPrice }}</span>
          </div>
          <div *ngIf="product.originalPrice" class="bg-rose-gold/10 text-rose-gold px-3 py-1 rounded-full text-sm font-medium">
            {{ getDiscountPercentage() }}% OFF
          </div>
        </div>
        <div class="flex items-center gap-2 mb-4">
          <div class="flex text-yellow-400">
            <svg *ngFor="let i of [1,2,3,4,5]" class="w-4 h-4 fill-current" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/>
            </svg>
          </div>
          <span class="text-sm text-muted-foreground">(127 reviews)</span>
        </div>
      </div>

      <div class="border-t border-border"></div>

      <div>
        <p class="text-muted-foreground leading-relaxed">{{ product.description }}</p>
      </div>

      <!-- Customization Options -->
      <div class="space-y-6">
        <div>
          <label for="custom-name" class="block text-base font-medium text-foreground mb-2">Personalize with Name</label>
          <input
            id="custom-name"
            type="text"
            [(ngModel)]="customName"
            name="customName"
            placeholder="Enter name for inner pouch (optional)"
            class="w-full px-3 py-2 border border-border rounded-md bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-rose-gold focus:border-transparent"
          />
        </div>

        <div>
          <label class="block text-base font-medium text-foreground mb-2">Color</label>
          <select [(ngModel)]="selectedColor" name="selectedColor" 
                  class="w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-rose-gold focus:border-transparent">
            <option value="">Choose color</option>
            <option *ngFor="let color of product.colors" [value]="color">{{ color }}</option>
          </select>
        </div>

        <div>
          <label class="block text-base font-medium text-foreground mb-2">Handle Type</label>
          <select [(ngModel)]="selectedHandle" name="selectedHandle"
                  class="w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-rose-gold focus:border-transparent">
            <option value="">Choose handle type</option>
            <option *ngFor="let handle of product.handles" [value]="handle">{{ handle }}</option>
          </select>
        </div>

        <div>
          <label class="block text-base font-medium text-foreground mb-2">Quantity</label>
          <div class="flex items-center gap-3">
            <button
              (click)="decreaseQuantity()"
              class="w-10 h-10 border border-border rounded-md hover:border-rose-gold transition-colors flex items-center justify-center"
            >
              -
            </button>
            <span class="w-12 text-center font-medium">{{ quantity }}</span>
            <button
              (click)="increaseQuantity()"
              class="w-10 h-10 border border-border rounded-md hover:border-rose-gold transition-colors flex items-center justify-center"
            >
              +
            </button>
          </div>
        </div>
      </div>

      <div class="border-t border-border"></div>

      <!-- Actions -->
      <div class="space-y-4">
        <div class="flex gap-4">
          <button 
            class="flex-1 bg-deep-rose hover:bg-deep-rose/90 text-white px-6 py-3 text-lg font-medium rounded-lg transition-all duration-300"
            (click)="addToCart()"
            [disabled]="!selectedColor || !selectedHandle">
            <svg class="w-5 h-5 mr-2 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"/>
            </svg>
            Add to Cart
          </button>
          <button 
            class="px-4 py-3 border border-border rounded-lg hover:border-rose-gold transition-colors"
            (click)="addToWishlist()">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
            </svg>
          </button>
        </div>
        
        <button 
          class="w-full bg-rose-gold hover:bg-rose-gold/90 text-white px-6 py-3 text-lg font-medium rounded-lg transition-all duration-300"
          (click)="buyNow()">
          Buy Now
        </button>
      </div>

      <!-- Features -->
      <div class="grid grid-cols-3 gap-4 pt-6">
        <div class="text-center">
          <svg class="w-6 h-6 mx-auto mb-2 text-rose-gold" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/>
          </svg>
          <p class="text-sm font-medium">Free Shipping</p>
          <p class="text-xs text-muted-foreground">On orders over $100</p>
        </div>
        <div class="text-center">
          <svg class="w-6 h-6 mx-auto mb-2 text-rose-gold" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
          </svg>
          <p class="text-sm font-medium">Quality Guarantee</p>
          <p class="text-xs text-muted-foreground">Handmade perfection</p>
        </div>
        <div class="text-center">
          <svg class="w-6 h-6 mx-auto mb-2 text-rose-gold" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
          </svg>
          <p class="text-sm font-medium">Easy Returns</p>
          <p class="text-xs text-muted-foreground">30-day policy</p>
        </div>
      </div>
    </div>
  </div>

<ng-template #loading>
  <div class="animate-pulse">
    <div class="h-8 bg-muted rounded mb-8 w-1/3"></div>
    <div class="grid lg:grid-cols-2 gap-12">
      <div class="space-y-4">
        <div class="aspect-square bg-muted rounded-2xl"></div>
        <div class="flex gap-4">
          <div *ngFor="let i of [1,2,3]" class="w-20 h-20 bg-muted rounded-lg"></div>
        </div>
      </div>
      <div class="space-y-6">
        <div class="h-8 bg-muted rounded w-2/3"></div>
        <div class="h-6 bg-muted rounded w-1/3"></div>
        <div class="h-20 bg-muted rounded"></div>
      </div>
    </div>
  </div>
</ng-template>